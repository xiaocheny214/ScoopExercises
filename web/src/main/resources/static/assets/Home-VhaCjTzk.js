import{r as v,m as Oe,n as Ke,p as At,f as _,q as V,o as d,w as l,c as g,d as t,b as s,h as c,s as We,t as u,v as Tt,x as Tl,y as Sl,z as qe,B as $l,C as he,u as Bl,a as X,g as El,k as q,E as p,D as Ul,i as Ll,j as n,F as Dl,G as ql,H as Fe,I as Fl,J as ge,K as x,L as Ol,M as Ql,N as Nl,O as _t,P as bt,Q as H,R as j,S as wt,T as Pl,U as Hl,V as Ct,W as kt,X as Vt,Y as zl,Z as xt,_ as Ml,$ as Rl,a0 as le,a1 as It}from"./index-BVGhpotA.js";import{C as Yl}from"./CatIcon-Cpp1lzg_.js";import{u as St,h as jl}from"./history-CxXN_IVo.js";import{f as ht,a as Je,b as Gl}from"./format-XwD1px1m.js";import{_ as $t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Jl}from"./question-CTk_vUCp.js";import{u as Kl}from"./questionBank-BoZwulwO.js";const Wl={class:"card-header"},Xl={key:0,class:"loading-content"},Zl={key:1,class:"statistics-content"},ea={class:"main-metrics"},ta={class:"metric-item"},la={class:"metric-icon total"},aa={class:"metric-info"},oa={class:"metric-value"},sa={class:"metric-item"},na={class:"metric-icon average"},ia={class:"metric-info"},ra={class:"metric-value"},da={class:"metric-item"},ua={class:"metric-icon pass"},pa={class:"metric-info"},ca={class:"metric-value"},ma={class:"metric-item"},va={class:"metric-icon highest"},fa={class:"metric-info"},ya={class:"metric-value"},ga={class:"detailed-stats"},_a={class:"stats-row"},ba={class:"stat-item"},wa={class:"stat-value"},Ca={class:"stat-item"},ka={class:"stat-value"},Va={class:"stat-item"},xa={class:"stat-value"},Ia={class:"score-distribution"},ha={class:"distribution-bars"},Aa={class:"bar-item"},Ta={class:"bar-container"},Sa={class:"bar-value"},$a={class:"bar-item"},Ba={class:"bar-container"},Ea={class:"bar-value"},Ua={class:"bar-item"},La={class:"bar-container"},Da={class:"bar-value"},qa={class:"bar-item"},Fa={class:"bar-container"},Oa={class:"bar-value"},Qa={__name:"HistoryStatistics",props:{filterParams:{type:Object,default:()=>({})}},setup(Xe){const G=Xe,J=St(),ae=v(!1),h=v({totalCount:0,averageScore:0,highestScore:0,lowestScore:0,passRate:0,totalAnswered:0,totalQuestions:0}),Q=Oe(()=>{const E=J.historyList;if(E.length===0)return{excellent:0,good:0,pass:0,fail:0};const y=E.map(B=>{const pe=B.totalScore||0,Z=B.maxScore||0;return Z>0?pe/Z*100:0}),L=y.filter(B=>B>=90).length,R=y.filter(B=>B>=80&&B<90).length,oe=y.filter(B=>B>=60&&B<80).length,se=y.filter(B=>B<60).length,N=E.length;return{excellent:N>0?Math.round(L/N*100):0,good:N>0?Math.round(R/N*100):0,pass:N>0?Math.round(oe/N*100):0,fail:N>0?Math.round(se/N*100):0}});Ke(()=>G.filterParams,()=>{F()},{deep:!0}),Ke(()=>J.historyList,()=>{F()},{deep:!0}),At(()=>{F()});const F=async()=>{ae.value=!0;try{const E=await jl.getHistoryStatistics(G.filterParams);E.success&&(h.value=E.data)}catch(E){console.error("加载统计数据失败:",E)}finally{ae.value=!1}},z=()=>{F()};return(E,y)=>{const L=_("el-icon"),R=_("el-button"),oe=_("el-skeleton"),se=_("el-card");return d(),V(se,{shadow:"never",class:"statistics-card"},{header:l(()=>[s("div",Wl,[t(L,{class:"header-icon"},{default:l(()=>[t(c($l))]),_:1}),y[0]||(y[0]=s("span",{class:"header-title"},"统计概览",-1)),t(R,{type:"text",size:"small",onClick:z,loading:ae.value},{default:l(()=>[t(L,null,{default:l(()=>[t(c(he))]),_:1})]),_:1},8,["loading"])])]),default:l(()=>[ae.value?(d(),g("div",Xl,[t(oe,{rows:2,animated:""})])):(d(),g("div",Zl,[s("div",ea,[s("div",ta,[s("div",la,[t(L,null,{default:l(()=>[t(c(We))]),_:1})]),s("div",aa,[s("div",oa,u(h.value.totalCount),1),y[1]||(y[1]=s("div",{class:"metric-label"},"总记录数",-1))])]),s("div",sa,[s("div",na,[t(L,null,{default:l(()=>[t(c(Tt))]),_:1})]),s("div",ia,[s("div",ra,u(h.value.averageScore)+"%",1),y[2]||(y[2]=s("div",{class:"metric-label"},"平均得分率",-1))])]),s("div",da,[s("div",ua,[t(L,null,{default:l(()=>[t(c(Tl))]),_:1})]),s("div",pa,[s("div",ca,u(h.value.passRate)+"%",1),y[3]||(y[3]=s("div",{class:"metric-label"},"及格率",-1))])]),s("div",ma,[s("div",va,[t(L,null,{default:l(()=>[t(c(Sl))]),_:1})]),s("div",fa,[s("div",ya,u(h.value.highestScore)+"%",1),y[4]||(y[4]=s("div",{class:"metric-label"},"最高得分率",-1))])])]),s("div",ga,[s("div",_a,[s("div",ba,[y[5]||(y[5]=s("span",{class:"stat-label"},"最低得分率:",-1)),s("span",wa,u(h.value.lowestScore)+"%",1)]),s("div",Ca,[y[6]||(y[6]=s("span",{class:"stat-label"},"总答题数:",-1)),s("span",ka,u(c(ht)(h.value.totalAnswered)),1)]),s("div",Va,[y[7]||(y[7]=s("span",{class:"stat-label"},"总题目数:",-1)),s("span",xa,u(c(ht)(h.value.totalQuestions)),1)])]),s("div",Ia,[y[12]||(y[12]=s("div",{class:"distribution-title"},"分数分布",-1)),s("div",ha,[s("div",Aa,[y[8]||(y[8]=s("div",{class:"bar-label"},"优秀 (≥90%)",-1)),s("div",Ta,[s("div",{class:"bar excellent",style:qe({width:Q.value.excellent+"%"})},null,4)]),s("div",Sa,u(Q.value.excellent)+"%",1)]),s("div",$a,[y[9]||(y[9]=s("div",{class:"bar-label"},"良好 (80-89%)",-1)),s("div",Ba,[s("div",{class:"bar good",style:qe({width:Q.value.good+"%"})},null,4)]),s("div",Ea,u(Q.value.good)+"%",1)]),s("div",Ua,[y[10]||(y[10]=s("div",{class:"bar-label"},"及格 (60-79%)",-1)),s("div",La,[s("div",{class:"bar pass",style:qe({width:Q.value.pass+"%"})},null,4)]),s("div",Da,u(Q.value.pass)+"%",1)]),s("div",qa,[y[11]||(y[11]=s("div",{class:"bar-label"},"不及格 (<60%)",-1)),s("div",Fa,[s("div",{class:"bar fail",style:qe({width:Q.value.fail+"%"})},null,4)]),s("div",Oa,u(Q.value.fail)+"%",1)])])])])]))]),_:1})}}},Na=$t(Qa,[["__scopeId","data-v-ab18b86b"]]),Pa={class:"home-container"},Ha={class:"header"},za={class:"header-left"},Ma={class:"header-right"},Ra={class:"welcome-text"},Ya={class:"main-content"},ja={class:"nav-cards"},Ga={class:"content-area"},Ja={class:"tab-header"},Ka={class:"tab-actions"},Wa={class:"paper-list"},Xa={key:1},Za={class:"view-toggle",style:{"margin-bottom":"16px"}},eo={class:"table-actions"},to={key:1,class:"paper-grid"},lo=["onClick"],ao={class:"paper-header"},oo={class:"paper-desc"},so={class:"paper-info"},no={class:"paper-footer"},io={class:"tab-header"},ro={class:"tab-actions"},uo={class:"filter-section"},po={class:"filter-left"},co={class:"filter-right"},mo={class:"question-content"},vo={key:2},fo={class:"question-actions"},yo={class:"tab-header"},go={class:"tab-actions"},_o={class:"search-section"},bo={class:"bank-content"},wo={key:0,class:"pagination-wrapper"},Co={class:"tab-header"},ko={class:"tab-actions"},Vo={class:"score-content"},xo={class:"statistics-section"},Io={class:"history-list-section"},ho={class:"card-header"},Ao={class:"bank-paper-info"},To={class:"bank-name"},So={class:"paper-name"},$o={class:"score-info"},Bo={class:"score-percentage"},Eo={class:"answer-info"},Uo={class:"answer-count"},Lo={class:"time-info"},Do={key:0,class:"empty-tip"},qo={key:1,class:"more-tip"},Fo={style:{"margin-top":"8px"}},Oo={class:"form-tip"},Qo={class:"form-tip"},No={key:0,class:"paper-stats"},Po={key:0,class:"bank-detail"},Ho={class:"batch-create-header"},zo={class:"batch-questions-list"},Mo={key:1},Ro={class:"question-header"},Yo={class:"question-number"},jo={class:"options-grid"},Go={key:0,class:"question-detail"},Jo={class:"question-details-section",style:{"margin-top":"20px"}},Ko={key:0,class:"multiple-choice-details"},Wo={class:"options-grid"},Xo={key:0,class:"option-item"},Zo={key:1,class:"option-item"},es={key:2,class:"option-item"},ts={key:3,class:"option-item"},ls={key:4,class:"option-item"},as={key:5,class:"option-item"},os={class:"correct-answer"},ss={key:1,class:"analysis-details"},ns={class:"correct-answer"},is={key:2,class:"essay-details"},rs={class:"reference-answer"},ds={key:3,class:"explanation"},us={__name:"Home",setup(Xe){const G=El(),J=Bl(),ae=Jl(),h=Kl(),Q=St(),F=v("papers"),z=v([]),E=v(!1),y=v(!1),L=v(!1),R=v(!1),oe=v(!1),se=v(!1),N=v(!1),B=v(!1),pe=v("json"),Z=v(""),Ae=v(null),Ze=v(null),et=v(null),tt=v(null),_e=v(!1),be=v(!1),Qe=v(!1),Te=v(""),ne=v([]),Se=v(1),$e=v(10),ee=v(null),lt=v(null),ie=v([]),ce=v("table"),Ne=v(!1),Pe=v([]),Bt=Oe(()=>({orderBy:"createTime",sortOrder:"DESC"})),me=v(!1),we=v(!1),Ce=v(!1),He=v(!1),ze=v(!1),K=v([]),Me=v([]),te=v([]),ke=v(null),Be=v(null),Ee=v(""),b=v(null),$=v(""),U=v(""),Ue=v(null),Y=v([]),re=X({name:"",description:"",creatorId:null}),de=X({id:null,name:"",description:"",creatorId:null}),r=X({id:null,paperId:null,questionTypeId:null,sortOrder:1,details:{questionText:"",score:5,optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionF:"",correctAnswer:"",correctAnswerArray:[],referenceAnswer:"",explanation:""}}),M=X({paperId:null,questionTypeId:null}),at=X({name:[{required:!0,message:"请输入题库名称",trigger:"blur"},{min:2,max:100,message:"题库名称长度在2-100个字符",trigger:"blur"}]}),Et=X({paperId:[{required:!0,message:"请选择所属试卷",trigger:"change"}],questionTypeId:[{required:!0,message:"请选择题目类型",trigger:"change"}],"details.questionText":[{required:!0,message:"请输入题目内容",trigger:"blur"},{min:5,max:1e3,message:"题目内容长度在5-1000个字符",trigger:"blur"}],"details.score":[{required:!0,message:"请设置分数",trigger:"blur"},{type:"number",min:1,message:"分数必须大于0",trigger:"blur"}],sortOrder:[{required:!0,message:"请设置排序",trigger:"blur"}]}),Ut=()=>{const o={...Et};return $.value==="SINGLE_CHOICE"||$.value==="MULTIPLE_CHOICE"?(o["details.optionA"]=[{required:!0,message:"请输入选项A",trigger:"blur"}],o["details.optionB"]=[{required:!0,message:"请输入选项B",trigger:"blur"}],o["details.optionC"]=[{required:!0,message:"请输入选项C",trigger:"blur"}],o["details.optionD"]=[{required:!0,message:"请输入选项D",trigger:"blur"}],o["details.correctAnswer"]=[{required:!0,message:"请选择正确答案",trigger:"change"}]):$.value==="ANALYSIS"?o["details.correctAnswer"]=[{required:!0,message:"请输入正确答案",trigger:"blur"}]:$.value==="ESSAY"&&(o["details.referenceAnswer"]=[{required:!0,message:"请输入参考答案",trigger:"blur"}]),o},Lt=Oe(()=>{if(!Te.value)return h.questionBanks;const o=Te.value.toLowerCase();return h.questionBanks.filter(e=>e.name.toLowerCase().includes(o)||e.description&&e.description.toLowerCase().includes(o))}),ot=Oe(()=>{let o=Me.value;if(Be.value&&(o=o.filter(e=>e.questionTypeId===Be.value)),Ee.value){const e=Ee.value.toLowerCase();o=o.filter(i=>i.questionText?.toLowerCase().includes(e))}return o}),D=X({title:"",description:"",bankId:null,timeLimit:60}),S=X({id:null,title:"",description:"",bankId:null,timeLimit:60,totalScore:null,questionCount:null}),st=X({title:[{required:!0,message:"请输入试卷标题",trigger:"blur"},{min:2,max:200,message:"试卷标题长度在2-200个字符",trigger:"blur"}],bankId:[{required:!0,message:"请选择所属题库",trigger:"change"}],timeLimit:[{required:!0,message:"请设置时间限制",trigger:"blur"}]}),Dt=async o=>{if(o==="logout")try{await le.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),J.clearUserInfo(),G.push("/login"),p.success("已退出登录")}catch{}else o==="profile"&&G.push("/profile")},nt=async(o,e)=>{if(o==="edit")fl(e);else if(o==="delete")try{await le.confirm(`确定要删除试卷"${e.title}"吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await cl(e.id)}catch{}},Re=o=>{console.log("开始考试，试卷数据:",o),ae.startAnswering(o),console.log("跳转到答题页面"),G.push("/exam")},qt=async()=>{if(await tt.value.validate()){oe.value=!0;try{const e=await h.createQuestionBank({...re,creatorId:J.userInfo.id});e.success?(p.success(e.message),R.value=!1,Ft()):p.error(e.message)}catch{p.error("创建题库失败")}finally{oe.value=!1}}},Ft=()=>{Object.assign(re,{name:"",description:"",creatorId:null})},Ve=async()=>{try{const o=await h.loadQuestionBanks();o.success||console.error("加载题库列表失败:",o.message)}catch(o){console.error("加载题库列表失败:",o)}},Ot=()=>{},Qt=o=>{ne.value=o},Nt=o=>{$e.value=o,it()},Pt=o=>{Se.value=o,it()},it=async()=>{try{const o=await h.loadQuestionBanksPage(Se.value-1,$e.value);o.success||p.error(o.message)}catch{p.error("加载数据失败")}},rt=o=>{Object.assign(de,{id:o.id,name:o.name,description:o.description,creatorId:o.creatorId}),_e.value=!0,be.value=!1},dt=async o=>{try{const e=await h.getQuestionBank(o.id);e.success?(ee.value=e.data,be.value=!0):p.error(e.message)}catch{p.error("获取题库详情失败")}},Ht=async o=>{try{await le.confirm(`确定要删除题库"${o.name}"吗？
注意：如果该题库下有试卷，需要先删除试卷才能删除题库。`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await h.deleteQuestionBank(o.id);e.success?(p.success(e.message),Ve()):p.error(e.message)}catch(e){e!=="cancel"&&p.error("删除失败")}},zt=async()=>{if(ne.value.length===0){p.warning("请选择要删除的题库");return}try{await le.confirm(`确定要删除选中的 ${ne.value.length} 个题库吗？
注意：如果题库下有试卷，需要先删除试卷才能删除题库。
此操作不可恢复。`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const o=ne.value.map(i=>i.id),e=await h.batchDeleteQuestionBanks(o);e.success?(p.success(e.message),ne.value=[],Ve()):p.error(e.message)}catch(o){o!=="cancel"&&p.error("批量删除失败")}},Mt=async()=>{if(await lt.value.validate()){Qe.value=!0;try{const e=await h.updateQuestionBank(de);e.success?(p.success(e.message),_e.value=!1,Ve()):p.error(e.message)}catch{p.error("更新失败")}finally{Qe.value=!1}}},Rt=o=>{ie.value=o},Yt=async()=>{if(ie.value.length===0){p.warning("请选择要删除的试卷");return}try{await le.confirm(`确定要删除选中的 ${ie.value.length} 份试卷吗？
此操作不可恢复。`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const o=ie.value.map(i=>i.id),e=await q.post("/pager/v1/batch",o);e.success?(p.success("批量删除成功"),ie.value=[],ue()):p.error(e.message||"批量删除失败")}catch(o){o!=="cancel"&&p.error("批量删除失败")}},jt=async()=>{try{const o=await q.get("/question/v1/types");(o.success||o.code===200)&&(te.value=o.data||[])}catch(o){console.error("加载题目类型失败:",o),te.value=[{id:1,typeCode:"SINGLE_CHOICE",typeName:"单选题"},{id:2,typeCode:"MULTIPLE_CHOICE",typeName:"多选题"},{id:3,typeCode:"ANALYSIS",typeName:"辨析题"},{id:4,typeCode:"ESSAY",typeName:"解答题"}]}},ve=async()=>{if(!ke.value){Me.value=[];return}try{const o=await q.get(`/question/v1/list/paper/${ke.value}`);(o.success||o.code===200)&&(Me.value=o.data||[])}catch(o){console.error("加载题目列表失败:",o),p.error("加载题目列表失败")}},Gt=()=>{ve(),K.value=[]},ut=()=>{},Jt=()=>{const o=te.value.find(e=>e.id===r.questionTypeId);o&&($.value=o.typeCode,Object.assign(r.details,{questionText:r.details.questionText||"",score:r.details.score||5,optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionF:"",correctAnswer:"",correctAnswerArray:[],referenceAnswer:"",explanation:""}),It(()=>{Ue.value?.clearValidate()}))},Kt=o=>{K.value=o},Wt=o=>{switch(o){case"SINGLE_CHOICE":return"primary";case"MULTIPLE_CHOICE":return"success";case"ANALYSIS":return"warning";case"ESSAY":return"danger";default:return""}},Xt=o=>{const e=z.value.find(i=>i.id===o);return e?e.title:"未知试卷"},Zt=o=>{o&&o.length>0?r.details.correctAnswer=o.sort().join(","):r.details.correctAnswer=""},el=(o,e)=>{o&&o.length>0?e.details.correctAnswer=o.sort().join(","):e.details.correctAnswer=""},tl=async()=>{if(await Ue.value.validate()){He.value=!0;try{const e={questionTypeId:r.questionTypeId,paperId:r.paperId,questionText:r.details.questionText,score:r.details.score,sortOrder:r.sortOrder,extraFields:{}};$.value==="SINGLE_CHOICE"||$.value==="MULTIPLE_CHOICE"?e.extraFields={optionA:r.details.optionA||"",optionB:r.details.optionB||"",optionC:r.details.optionC||"",optionD:r.details.optionD||"",optionE:r.details.optionE||"",optionF:r.details.optionF||"",correctAnswer:r.details.correctAnswer||"",explanation:r.details.explanation||""}:$.value==="ANALYSIS"?e.extraFields={correctAnswer:r.details.correctAnswer||"",explanation:r.details.explanation||""}:$.value==="ESSAY"&&(e.extraFields={referenceAnswer:r.details.referenceAnswer||"",explanation:r.details.explanation||""}),r.id&&(e.id=r.id),console.log("发送的题目数据:",e);const i=r.id?"/question/v1/update":"/question/v1/create",m=r.id?"put":"post",A=await q[m](i,e);console.log("后端响应:",A),A.success||A.code===200?(p.success(r.id?"题目更新成功":"题目创建成功"),me.value=!1,dl(),ve()):p.error(A.message||"操作失败")}catch(e){console.error("创建题目错误:",e),p.error(e.message||e.msg||(r.id?"更新题目失败":"创建题目失败"))}finally{He.value=!1}}},ll=async o=>{try{const e=await q.get(`/question/v1/get/${o.id}?questionTypeId=${o.questionTypeId}`);e.success&&(b.value=e.data,Ce.value=!0)}catch{p.error("获取题目详情失败")}},pt=o=>{Object.assign(r,{id:o.id,paperId:o.paperId,questionTypeId:o.questionTypeId,sortOrder:o.sortOrder,details:{...o.details}});const e=te.value.find(i=>i.id===o.questionTypeId);e&&($.value=e.typeCode,e.typeCode==="MULTIPLE_CHOICE"&&o.details.correctAnswer?r.details.correctAnswerArray=o.details.correctAnswer.split(","):r.details.correctAnswerArray=[]),me.value=!0,Ce.value=!1},al=async o=>{try{await le.confirm(`确定要删除题目"${o.details?.questionText?.substring(0,20)||""}..."吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),(await q.delete(`/question/v1/delete/${o.id}?questionTypeId=${o.questionTypeId}`)).success&&(p.success("题目删除成功"),ve())}catch(e){e!=="cancel"&&p.error("删除题目失败")}},ol=async()=>{if(K.value.length===0){p.warning("请选择要删除的题目");return}try{await le.confirm(`确定要删除选中的 ${K.value.length} 道题目吗？
此操作不可恢复。`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),console.log("选中的题目:",K.value);const o={};K.value.forEach(e=>{o[e.questionTypeId]||(o[e.questionTypeId]=[]),o[e.questionTypeId].push(e.id)}),console.log("分组后的题目:",o);for(const[e,i]of Object.entries(o)){console.log(`正在删除题目类型 ${e} 的题目:`,i);const m=`/question/v1/delete/batch?questionTypeId=${e}`;console.log("请求URL:",m),console.log("请求体:",i);try{const A=await q.post(m,i);if(console.log("删除响应:",A),!A.success){console.error("删除失败响应:",A),p.error(`删除题目类型${e}的题目失败: ${A.message||"未知错误"}`);return}}catch(A){console.error(`删除题目类型${e}时发生错误:`,A),p.error(`删除题目类型${e}的题目时发生错误: ${A.message||A.msg||"网络错误"}`);return}}p.success("批量删除成功"),K.value=[],ve()}catch(o){o!=="cancel"&&(console.error("批量删除整体错误:",o),p.error(`批量删除失败: ${o.message||o.msg||"未知错误"}`))}},sl=()=>{const o=te.value.find(e=>e.id===M.questionTypeId);o&&(U.value=o.typeCode)},nl=()=>{if(!M.paperId||!M.questionTypeId){p.warning("请先选择试卷和题目类型");return}const o={paperId:M.paperId,questionTypeId:M.questionTypeId,sortOrder:Y.value.length+1,details:{questionText:"",score:5,optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionF:"",correctAnswer:"",correctAnswerArray:[],referenceAnswer:"",explanation:""}};Y.value.push(o)},il=o=>{Y.value.splice(o,1)},rl=async()=>{if(Y.value.length===0){p.warning("请先添加题目");return}for(let o=0;o<Y.value.length;o++){const e=Y.value[o];if(!e.details.questionText){p.warning(`第${o+1}个题目的内容不能为空`);return}if(!e.details.score||e.details.score<=0){p.warning(`第${o+1}个题目的分数必须大于0`);return}if(U.value==="SINGLE_CHOICE"||U.value==="MULTIPLE_CHOICE"){if(!e.details.optionA||!e.details.optionB||!e.details.optionC||!e.details.optionD||!e.details.correctAnswer){p.warning(`第${o+1}个选择题的选项和正确答案不能为空`);return}}else if(U.value==="ANALYSIS"){if(!e.details.correctAnswer){p.warning(`第${o+1}个辨析题的正确答案不能为空`);return}}else if(U.value==="ESSAY"&&!e.details.referenceAnswer){p.warning(`第${o+1}个解答题的参考答案不能为空`);return}}ze.value=!0;try{const o=Y.value.map(i=>({questionTypeId:i.questionTypeId,paperId:i.paperId,questionText:i.details.questionText,score:i.details.score,sortOrder:i.sortOrder,extraFields:U.value==="SINGLE_CHOICE"||U.value==="MULTIPLE_CHOICE"?{optionA:i.details.optionA||"",optionB:i.details.optionB||"",optionC:i.details.optionC||"",optionD:i.details.optionD||"",optionE:i.details.optionE||"",optionF:i.details.optionF||"",correctAnswer:i.details.correctAnswer||"",explanation:i.details.explanation||""}:U.value==="ANALYSIS"?{correctAnswer:i.details.correctAnswer||"",explanation:i.details.explanation||""}:{referenceAnswer:i.details.referenceAnswer||"",explanation:i.details.explanation||""}})),e=await q.post("/question/v1/create/batch",o);e.success||e.code===200?(p.success("批量创建成功"),we.value=!1,Y.value=[],M.paperId=null,M.questionTypeId=null,U.value="",ve()):p.error(e.message||"批量创建失败")}catch(o){p.error("批量创建失败"),console.error("批量创建错误:",o)}finally{ze.value=!1}},dl=()=>{Object.assign(r,{id:null,paperId:null,questionTypeId:null,sortOrder:1,details:{questionText:"",score:5,optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionF:"",correctAnswer:"",referenceAnswer:"",explanation:""}}),$.value="",It(()=>{Ue.value?.clearValidate()})},ul=async()=>{if(await Ze.value.validate()){se.value=!0;try{const e={title:D.title,description:D.description,bankId:D.bankId,timeLimit:D.timeLimit};(await q.post("/pager/v1/init",e)).success&&(p.success("试卷创建成功"),E.value=!1,vl(),ue())}catch(e){p.error(e.msg||"创建试卷失败")}finally{se.value=!1}}},pl=async()=>{B.value=!0;try{let o;if(pe.value==="json"){if(!Z.value.trim()){p.warning("请输入JSON数据");return}o=await q.post("/paper/v1/import/json",JSON.parse(Z.value))}else if(pe.value==="excel"){if(!Ae.value){p.warning("请选择Excel文件");return}const e=new FormData;e.append("file",Ae.value),o=await q.post("/paper/v1/import/excel",e,{headers:{"Content-Type":"multipart/form-data"}})}o.success&&(p.success("试卷导入成功"),L.value=!1,Z.value="",Ae.value=null,ue())}catch(o){console.error("导入试卷失败:",o),p.error(o.message||o.msg||"导入试卷失败")}finally{B.value=!1}},cl=async o=>{try{(await q.delete(`/pager/v1/${o}`)).success&&(p.success("试卷删除成功"),ue())}catch(e){p.error(e.msg||"删除试卷失败")}},ml=o=>{Ae.value=o.raw,console.log("选择的文件:",o.name)},vl=()=>{Object.assign(D,{title:"",description:"",bankId:null,timeLimit:60})},fl=o=>{Object.assign(S,{id:o.id,title:o.title,description:o.description,bankId:o.bankId,timeLimit:o.timeLimit||60,totalScore:o.totalScore,questionCount:o.questionCount}),y.value=!0},yl=async()=>{if(await et.value.validate()){N.value=!0;try{const e={id:S.id,title:S.title,description:S.description,bankId:S.bankId,timeLimit:S.timeLimit};(await q.put("/pager/v1/update",e)).success&&(p.success("试卷更新成功"),y.value=!1,ue())}catch(e){p.error(e.msg||"更新试卷失败")}finally{N.value=!1}}},ue=async()=>{try{const o=await q.get("/pager/v1/list");o.success&&(z.value=o.data||[],ae.setPapers(z.value))}catch(o){console.error("加载试卷列表失败:",o),p.error("加载试卷列表失败")}},Le=async()=>{Ne.value=!0;try{const o={page:0,size:10,orderBy:"createTime",sortOrder:"DESC"};(await Q.getHistoryList(o)).success&&(Pe.value=Q.historyList)}catch{p.error("加载历史记录失败")}finally{Ne.value=!1}},gl=()=>{Le()},_l=o=>{G.push({name:"HistoryDetail",params:{id:o},query:{from:"home"}})},bl=async o=>{try{await le.confirm("确定要删除这条历史记录吗？删除后无法恢复。","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await Q.deleteHistory(o);e.success?(p.success("删除成功"),Le()):p.error(e.message||"删除失败")}catch(e){e!=="cancel"&&p.error("删除失败")}},ct=()=>{G.push({name:"History"})},wl=(o,e)=>{const i=o/e*100;return i>=90?"score-excellent":i>=80?"score-good":i>=60?"score-pass":"score-fail"},Cl=o=>({0:"info",1:"success",2:"warning"})[o]||"info",kl=o=>({0:"未完成",1:"已完成",2:"部分完成"})[o]||"未知";return At(()=>{if(J.initUserInfo(),!J.isLoggedIn){G.push("/login");return}ue(),Ve(),jt(),F.value==="scores"&&Le()}),Ke(F,o=>{o==="scores"&&Le()}),(o,e)=>{const i=_("el-icon"),m=_("el-button"),A=_("el-dropdown-item"),Ye=_("el-dropdown-menu"),je=_("el-dropdown"),xe=_("el-empty"),Vl=_("el-button-group"),w=_("el-table-column"),mt=_("el-link"),De=_("el-table"),fe=_("el-tab-pane"),k=_("el-option"),P=_("el-select"),C=_("el-input"),vt=_("el-tag"),xl=_("el-pagination"),Il=_("el-progress"),hl=_("el-card"),ft=_("el-tabs"),f=_("el-form-item"),Ie=_("el-input-number"),yt=_("el-alert"),ye=_("el-form"),W=_("el-dialog"),O=_("el-descriptions-item"),Ge=_("el-descriptions"),Al=_("el-upload"),gt=Ul("loading");return d(),g("div",Pa,[s("div",Ha,[s("div",za,[t(Yl,{"cat-size":"40px",class:"header-logo"}),e[71]||(e[71]=s("span",{class:"app-name"},"ScoopExercises",-1))]),s("div",Ma,[s("span",Ra,"欢迎，"+u(c(J).userInfo.nickName||c(J).userInfo.account),1),t(je,{onCommand:Dt},{dropdown:l(()=>[t(Ye,null,{default:l(()=>[t(A,{command:"profile"},{default:l(()=>[...e[72]||(e[72]=[n("个人信息",-1)])]),_:1}),t(A,{command:"logout",divided:""},{default:l(()=>[...e[73]||(e[73]=[n("退出登录",-1)])]),_:1})]),_:1})]),default:l(()=>[t(m,{type:"text",class:"user-btn"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Ll))]),_:1})]),_:1})]),_:1})])]),s("div",Ya,[s("div",ja,[s("div",{class:"nav-card",onClick:e[0]||(e[0]=a=>F.value="papers")},[t(i,{class:"nav-icon"},{default:l(()=>[t(c(We))]),_:1}),e[74]||(e[74]=s("h3",null,"试卷管理",-1)),e[75]||(e[75]=s("p",null,"创建和管理试卷，开始刷题练习",-1))]),s("div",{class:"nav-card",onClick:e[1]||(e[1]=a=>F.value="questions")},[t(i,{class:"nav-icon"},{default:l(()=>[t(c(Dl))]),_:1}),e[76]||(e[76]=s("h3",null,"题目管理",-1)),e[77]||(e[77]=s("p",null,"添加、编辑和组织题目",-1))]),s("div",{class:"nav-card",onClick:e[2]||(e[2]=a=>F.value="banks")},[t(i,{class:"nav-icon"},{default:l(()=>[t(c(ql))]),_:1}),e[78]||(e[78]=s("h3",null,"题库管理",-1)),e[79]||(e[79]=s("p",null,"创建和管理题目分类",-1))]),s("div",{class:"nav-card",onClick:e[3]||(e[3]=a=>F.value="scores")},[t(i,{class:"nav-icon"},{default:l(()=>[t(c(Tt))]),_:1}),e[80]||(e[80]=s("h3",null,"成绩统计",-1)),e[81]||(e[81]=s("p",null,"查看答题记录和成绩分析",-1))])]),s("div",Ga,[t(ft,{modelValue:F.value,"onUpdate:modelValue":e[17]||(e[17]=a=>F.value=a),class:"main-tabs"},{default:l(()=>[t(fe,{label:"试卷管理",name:"papers"},{default:l(()=>[s("div",Ja,[e[85]||(e[85]=s("h2",null,"试卷管理",-1)),s("div",Ka,[t(m,{type:"primary",onClick:e[4]||(e[4]=a=>E.value=!0)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Fe))]),_:1}),e[82]||(e[82]=n(" 创建试卷 ",-1))]),_:1}),t(m,{onClick:e[5]||(e[5]=a=>L.value=!0)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Fl))]),_:1}),e[83]||(e[83]=n(" 导入试卷 ",-1))]),_:1}),t(m,{type:"danger",disabled:ie.value.length===0,onClick:Yt},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1}),n(" 批量删除 ("+u(ie.value.length)+") ",1)]),_:1},8,["disabled"]),t(m,{onClick:ue},{default:l(()=>[t(i,null,{default:l(()=>[t(c(he))]),_:1}),e[84]||(e[84]=n(" 刷新 ",-1))]),_:1})])]),s("div",Wa,[z.value.length===0?(d(),V(xe,{key:0,description:"暂无试卷，点击上方按钮创建第一份试卷"})):(d(),g("div",Xa,[s("div",Za,[t(Vl,null,{default:l(()=>[t(m,{type:ce.value==="table"?"primary":"",onClick:e[6]||(e[6]=a=>ce.value="table")},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Ol))]),_:1}),e[86]||(e[86]=n(" 表格视图 ",-1))]),_:1},8,["type"]),t(m,{type:ce.value==="card"?"primary":"",onClick:e[7]||(e[7]=a=>ce.value="card")},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Ql))]),_:1}),e[87]||(e[87]=n(" 卡片视图 ",-1))]),_:1},8,["type"])]),_:1})]),ce.value==="table"?(d(),V(De,{key:0,data:z.value,onSelectionChange:Rt,stripe:"",style:{width:"100%","margin-bottom":"20px"}},{default:l(()=>[t(w,{type:"selection",width:"55"}),t(w,{prop:"id",label:"ID",width:"80"}),t(w,{prop:"title",label:"试卷标题","min-width":"200"},{default:l(a=>[t(mt,{type:"primary",onClick:T=>Re(a.row)},{default:l(()=>[n(u(a.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(w,{prop:"description",label:"描述","min-width":"250","show-overflow-tooltip":""}),t(w,{prop:"questionCount",label:"题目数量",width:"100"},{default:l(a=>[n(u(a.row.questionCount||0)+" 题 ",1)]),_:1}),t(w,{prop:"timeLimit",label:"时间限制",width:"100"},{default:l(a=>[n(u(a.row.timeLimit||60)+" 分钟 ",1)]),_:1}),t(w,{prop:"totalScore",label:"总分",width:"100"},{default:l(a=>[n(u(a.row.totalScore||"待定")+" 分 ",1)]),_:1}),t(w,{label:"操作",width:"220",fixed:"right"},{default:l(a=>[s("div",eo,[t(m,{type:"primary",size:"small",onClick:T=>Re(a.row),class:"action-btn"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Nl))]),_:1}),e[88]||(e[88]=n(" 开始答题 ",-1))]),_:1},8,["onClick"]),t(je,{onCommand:T=>nt(T,a.row)},{dropdown:l(()=>[t(Ye,null,{default:l(()=>[t(A,{command:"edit"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(bt))]),_:1}),e[89]||(e[89]=n(" 编辑试卷 ",-1))]),_:1}),t(A,{command:"delete",divided:""},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1}),e[90]||(e[90]=n(" 删除试卷 ",-1))]),_:1})]),_:1})]),default:l(()=>[t(m,{type:"text",size:"small",class:"more-btn"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(_t))]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),_:1})]),_:1},8,["data"])):x("",!0),ce.value==="card"?(d(),g("div",to,[(d(!0),g(H,null,j(z.value,a=>(d(),g("div",{key:a.id,class:"paper-card",onClick:T=>Re(a)},[s("div",ao,[s("h3",null,u(a.title),1),t(je,{onCommand:T=>nt(T,a)},{dropdown:l(()=>[t(Ye,null,{default:l(()=>[t(A,{command:"edit"},{default:l(()=>[...e[91]||(e[91]=[n("编辑",-1)])]),_:1}),t(A,{command:"delete",divided:""},{default:l(()=>[...e[92]||(e[92]=[n("删除",-1)])]),_:1})]),_:1})]),default:l(()=>[t(m,{type:"text",size:"small"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(_t))]),_:1})]),_:1})]),_:1},8,["onCommand"])]),s("p",oo,u(a.description||"暂无描述"),1),s("div",so,[s("span",null,[t(i,null,{default:l(()=>[t(c(We))]),_:1}),n(" "+u(a.questionCount||0)+" 题",1)]),s("span",null,[t(i,null,{default:l(()=>[t(c(wt))]),_:1}),n(" "+u(a.timeLimit||60)+" 分钟",1)]),s("span",null,[t(i,null,{default:l(()=>[t(c(Pl))]),_:1}),n(" "+u(a.totalScore||"待定")+" 分",1)])]),s("div",no,[t(m,{type:"primary",size:"small"},{default:l(()=>[...e[93]||(e[93]=[n("开始答题",-1)])]),_:1})])],8,lo))),128))])):x("",!0)]))])]),_:1}),t(fe,{label:"题目管理",name:"questions"},{default:l(()=>[s("div",io,[e[97]||(e[97]=s("h2",null,"题目管理",-1)),s("div",ro,[t(m,{type:"primary",onClick:e[8]||(e[8]=a=>me.value=!0)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Fe))]),_:1}),e[94]||(e[94]=n(" 添加题目 ",-1))]),_:1}),t(m,{onClick:e[9]||(e[9]=a=>we.value=!0)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Hl))]),_:1}),e[95]||(e[95]=n(" 批量添加 ",-1))]),_:1}),t(m,{type:"danger",disabled:K.value.length===0,onClick:ol},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1}),n(" 批量删除 ("+u(K.value.length)+") ",1)]),_:1},8,["disabled"]),t(m,{onClick:ve},{default:l(()=>[t(i,null,{default:l(()=>[t(c(he))]),_:1}),e[96]||(e[96]=n(" 刷新 ",-1))]),_:1})])]),s("div",uo,[s("div",po,[t(P,{modelValue:ke.value,"onUpdate:modelValue":e[10]||(e[10]=a=>ke.value=a),placeholder:"选择试卷",style:{width:"200px","margin-right":"12px"},onChange:Gt,clearable:""},{default:l(()=>[(d(!0),g(H,null,j(z.value,a=>(d(),V(k,{key:a.id,label:a.title,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(P,{modelValue:Be.value,"onUpdate:modelValue":e[11]||(e[11]=a=>Be.value=a),placeholder:"题目类型",style:{width:"150px","margin-right":"12px"},onChange:ut,clearable:""},{default:l(()=>[(d(!0),g(H,null,j(te.value,a=>(d(),V(k,{key:a.id,label:a.typeName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",co,[t(C,{modelValue:Ee.value,"onUpdate:modelValue":e[12]||(e[12]=a=>Ee.value=a),placeholder:"搜索题目内容",style:{width:"300px"},clearable:"",onInput:ut},{prefix:l(()=>[t(i,null,{default:l(()=>[t(c(Ct))]),_:1})]),_:1},8,["modelValue"])])]),s("div",mo,[ke.value?ot.value.length===0?(d(),V(xe,{key:1,description:"该试卷暂无题目，点击上方按钮添加题目"})):(d(),g("div",vo,[t(De,{data:ot.value,onSelectionChange:Kt,stripe:"",style:{width:"100%"}},{default:l(()=>[t(w,{type:"selection",width:"55"}),t(w,{prop:"id",label:"ID",width:"80"}),t(w,{prop:"questionTypeName",label:"题目类型",width:"100"},{default:l(a=>[t(vt,{type:Wt(a.row.questionTypeCode)},{default:l(()=>[n(u(a.row.questionTypeName),1)]),_:2},1032,["type"])]),_:1}),t(w,{prop:"questionText",label:"题目内容","min-width":"300","show-overflow-tooltip":""}),t(w,{prop:"score",label:"分数",width:"80"},{default:l(a=>[n(u(a.row.score||0)+" 分 ",1)]),_:1}),t(w,{prop:"sortOrder",label:"排序",width:"80"}),t(w,{label:"操作",width:"160",fixed:"right"},{default:l(a=>[s("div",fo,[t(m,{type:"primary",size:"small",plain:"",onClick:T=>ll(a.row),class:"action-button"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(kt))]),_:1})]),_:1},8,["onClick"]),t(m,{type:"warning",size:"small",plain:"",onClick:T=>pt(a.row),class:"action-button"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(bt))]),_:1})]),_:1},8,["onClick"]),t(m,{type:"danger",size:"small",plain:"",onClick:T=>al(a.row),class:"action-button"},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1})]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])])):(d(),V(xe,{key:0,description:"请先选择试卷查看题目"}))])]),_:1}),t(fe,{label:"题库管理",name:"banks"},{default:l(()=>[s("div",yo,[e[100]||(e[100]=s("h2",null,"题库管理",-1)),s("div",go,[t(m,{type:"primary",onClick:e[13]||(e[13]=a=>R.value=!0)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Fe))]),_:1}),e[98]||(e[98]=n(" 创建题库 ",-1))]),_:1}),t(m,{type:"danger",disabled:ne.value.length===0,onClick:zt},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1}),n(" 批量删除 ("+u(ne.value.length)+") ",1)]),_:1},8,["disabled"]),t(m,{onClick:Ve},{default:l(()=>[t(i,null,{default:l(()=>[t(c(he))]),_:1}),e[99]||(e[99]=n(" 刷新 ",-1))]),_:1})])]),s("div",_o,[t(C,{modelValue:Te.value,"onUpdate:modelValue":e[14]||(e[14]=a=>Te.value=a),placeholder:"搜索题库名称或描述",style:{width:"300px"},clearable:"",onInput:Ot},{prefix:l(()=>[t(i,null,{default:l(()=>[t(c(Ct))]),_:1})]),_:1},8,["modelValue"])]),s("div",bo,[Vt((d(),V(De,{data:Lt.value,onSelectionChange:Qt,stripe:"",style:{width:"100%"}},{default:l(()=>[t(w,{type:"selection",width:"55"}),t(w,{prop:"id",label:"ID",width:"80"}),t(w,{prop:"name",label:"题库名称","min-width":"200"},{default:l(a=>[t(mt,{type:"primary",onClick:T=>dt(a.row)},{default:l(()=>[n(u(a.row.name),1)]),_:2},1032,["onClick"])]),_:1}),t(w,{prop:"description",label:"描述","min-width":"300","show-overflow-tooltip":""}),t(w,{prop:"creatorId",label:"创建者ID",width:"100"}),t(w,{prop:"createTime",label:"创建时间",width:"180"},{default:l(a=>[n(u(c(Je)(a.row.createTime)),1)]),_:1}),t(w,{label:"操作",width:"200",fixed:"right"},{default:l(a=>[t(m,{type:"text",size:"small",onClick:T=>rt(a.row)},{default:l(()=>[...e[101]||(e[101]=[n(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(m,{type:"text",size:"small",onClick:T=>dt(a.row)},{default:l(()=>[...e[102]||(e[102]=[n(" 详情 ",-1)])]),_:1},8,["onClick"]),t(m,{type:"text",size:"small",style:{color:"#f56c6c"},onClick:T=>Ht(a.row)},{default:l(()=>[...e[103]||(e[103]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[gt,c(h).loading]]),c(h).questionBanks.length>0?(d(),g("div",wo,[t(xl,{"current-page":Se.value,"onUpdate:currentPage":e[15]||(e[15]=a=>Se.value=a),"page-size":$e.value,"onUpdate:pageSize":e[16]||(e[16]=a=>$e.value=a),"page-sizes":[10,20,50,100],total:c(h).pagination.totalElements,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Nt,onCurrentChange:Pt},null,8,["current-page","page-size","total"])])):x("",!0)])]),_:1}),t(fe,{label:"成绩统计",name:"scores"},{default:l(()=>[s("div",Co,[e[105]||(e[105]=s("h2",null,"成绩统计",-1)),s("div",ko,[t(m,{onClick:gl},{default:l(()=>[t(i,null,{default:l(()=>[t(c(he))]),_:1}),e[104]||(e[104]=n(" 刷新 ",-1))]),_:1})])]),s("div",Vo,[s("div",xo,[t(Na,{"filter-params":Bt.value},null,8,["filter-params"])]),s("div",Io,[t(hl,{shadow:"never",class:"history-card"},{header:l(()=>[s("div",ho,[e[107]||(e[107]=s("span",null,"最近答题记录（最多显示10条）",-1)),t(m,{type:"text",onClick:ct},{default:l(()=>[e[106]||(e[106]=n(" 查看更多 ",-1)),t(i,null,{default:l(()=>[t(c(xt))]),_:1})]),_:1})])]),default:l(()=>[Vt((d(),V(De,{data:Pe.value,stripe:"",style:{width:"100%"}},{default:l(()=>[t(w,{prop:"id",label:"记录ID",width:"100"}),t(w,{label:"题库/试卷","min-width":"200"},{default:l(({row:a})=>[s("div",Ao,[s("div",To,u(a.bankName||"未知题库"),1),s("div",So,u(a.paperName||"未知试卷"),1)])]),_:1}),t(w,{label:"成绩",width:"120",align:"center"},{default:l(({row:a})=>[s("div",$o,[s("div",{class:zl(["score-value",wl(a.totalScore,a.maxScore)])},u(a.totalScore)+"/"+u(a.maxScore),3),s("div",Bo,u(c(Gl)(a.totalScore,a.maxScore)),1)])]),_:1}),t(w,{label:"答题情况",width:"120",align:"center"},{default:l(({row:a})=>[s("div",Eo,[s("div",Uo,u(a.answeredCount)+"/"+u(a.totalCount),1),t(Il,{percentage:a.answeredCount/a.totalCount*100,"show-text":!1,"stroke-width":6},null,8,["percentage"])])]),_:1}),t(w,{label:"答题时间",width:"180"},{default:l(({row:a})=>[s("div",Lo,[t(i,null,{default:l(()=>[t(c(wt))]),_:1}),n(" "+u(c(Je)(a.createTime)),1)])]),_:1}),t(w,{label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[t(vt,{type:Cl(a.status)},{default:l(()=>[n(u(kl(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(w,{label:"操作",width:"180",fixed:"right"},{default:l(({row:a})=>[t(m,{type:"primary",size:"small",onClick:T=>_l(a.id)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(kt))]),_:1}),e[108]||(e[108]=n(" 查看详情 ",-1))]),_:1},8,["onClick"]),t(m,{type:"danger",size:"small",onClick:T=>bl(a.id)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(ge))]),_:1}),e[109]||(e[109]=n(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[gt,Ne.value]]),Pe.value.length===0?(d(),g("div",Do,[t(xe,{description:"暂无答题记录"})])):(d(),g("div",qo,[t(m,{type:"text",onClick:ct},{default:l(()=>[e[110]||(e[110]=n(" 查看全部记录 ",-1)),t(i,null,{default:l(()=>[t(c(xt))]),_:1})]),_:1})]))]),_:1})])])]),_:1})]),_:1},8,["modelValue"])])]),t(W,{modelValue:E.value,"onUpdate:modelValue":e[24]||(e[24]=a=>E.value=a),title:"创建试卷",width:"600px"},{footer:l(()=>[t(m,{onClick:e[23]||(e[23]=a=>E.value=!1)},{default:l(()=>[...e[113]||(e[113]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:ul,loading:se.value},{default:l(()=>[...e[114]||(e[114]=[n("创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ye,{model:D,rules:st,ref_key:"paperFormRef",ref:Ze,"label-width":"80px"},{default:l(()=>[t(f,{label:"所属题库",prop:"bankId"},{default:l(()=>[t(P,{modelValue:D.bankId,"onUpdate:modelValue":e[18]||(e[18]=a=>D.bankId=a),placeholder:"请选择题库",style:{width:"100%"}},{default:l(()=>[(d(!0),g(H,null,j(c(h).questionBanks,a=>(d(),V(k,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s("div",Fo,[t(m,{type:"text",onClick:e[19]||(e[19]=a=>R.value=!0)},{default:l(()=>[...e[111]||(e[111]=[n("+ 创建新题库",-1)])]),_:1})])]),_:1}),t(f,{label:"试卷标题",prop:"title"},{default:l(()=>[t(C,{modelValue:D.title,"onUpdate:modelValue":e[20]||(e[20]=a=>D.title=a),placeholder:"请输入试卷标题"},null,8,["modelValue"])]),_:1}),t(f,{label:"试卷描述",prop:"description"},{default:l(()=>[t(C,{modelValue:D.description,"onUpdate:modelValue":e[21]||(e[21]=a=>D.description=a),type:"textarea",rows:3,placeholder:"请输入试卷描述（可选）"},null,8,["modelValue"])]),_:1}),t(f,{label:"时间限制",prop:"timeLimit"},{default:l(()=>[t(Ie,{modelValue:D.timeLimit,"onUpdate:modelValue":e[22]||(e[22]=a=>D.timeLimit=a),min:1,max:300,"controls-position":"right"},null,8,["modelValue"]),e[112]||(e[112]=s("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1}),s("div",Oo,[t(yt,{title:"提示",description:"试卷的总分和题目数量将根据后续添加的题目自动计算",type:"info",closable:!1,"show-icon":""})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(W,{modelValue:y.value,"onUpdate:modelValue":e[30]||(e[30]=a=>y.value=a),title:"编辑试卷",width:"600px"},{footer:l(()=>[t(m,{onClick:e[29]||(e[29]=a=>y.value=!1)},{default:l(()=>[...e[116]||(e[116]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:yl,loading:N.value},{default:l(()=>[...e[117]||(e[117]=[n("更新",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ye,{model:S,rules:st,ref_key:"editPaperFormRef",ref:et,"label-width":"80px"},{default:l(()=>[t(f,{label:"所属题库",prop:"bankId"},{default:l(()=>[t(P,{modelValue:S.bankId,"onUpdate:modelValue":e[25]||(e[25]=a=>S.bankId=a),placeholder:"请选择题库",style:{width:"100%"}},{default:l(()=>[(d(!0),g(H,null,j(c(h).questionBanks,a=>(d(),V(k,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"试卷标题",prop:"title"},{default:l(()=>[t(C,{modelValue:S.title,"onUpdate:modelValue":e[26]||(e[26]=a=>S.title=a),placeholder:"请输入试卷标题"},null,8,["modelValue"])]),_:1}),t(f,{label:"试卷描述",prop:"description"},{default:l(()=>[t(C,{modelValue:S.description,"onUpdate:modelValue":e[27]||(e[27]=a=>S.description=a),type:"textarea",rows:3,placeholder:"请输入试卷描述（可选）"},null,8,["modelValue"])]),_:1}),t(f,{label:"时间限制",prop:"timeLimit"},{default:l(()=>[t(Ie,{modelValue:S.timeLimit,"onUpdate:modelValue":e[28]||(e[28]=a=>S.timeLimit=a),min:1,max:300,"controls-position":"right"},null,8,["modelValue"]),e[115]||(e[115]=s("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1}),s("div",Qo,[t(yt,{title:"说明",description:"总分和题目数量由系统根据试卷中的题目自动计算，无需手动设置",type:"info",closable:!1,"show-icon":""})]),S.id?(d(),g("div",No,[t(Ge,{column:2,size:"small",border:""},{default:l(()=>[t(O,{label:"当前题目数量"},{default:l(()=>[n(u(S.questionCount||0)+" 题",1)]),_:1}),t(O,{label:"当前总分"},{default:l(()=>[n(u(S.totalScore||0)+" 分",1)]),_:1})]),_:1})])):x("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(W,{modelValue:L.value,"onUpdate:modelValue":e[34]||(e[34]=a=>L.value=a),title:"导入试卷",width:"500px"},{footer:l(()=>[t(m,{onClick:e[33]||(e[33]=a=>L.value=!1)},{default:l(()=>[...e[120]||(e[120]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:pl,loading:B.value},{default:l(()=>[...e[121]||(e[121]=[n("导入",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ft,{modelValue:pe.value,"onUpdate:modelValue":e[32]||(e[32]=a=>pe.value=a)},{default:l(()=>[t(fe,{label:"JSON导入",name:"json"},{default:l(()=>[t(C,{modelValue:Z.value,"onUpdate:modelValue":e[31]||(e[31]=a=>Z.value=a),type:"textarea",rows:10,placeholder:"请粘贴试卷JSON数据..."},null,8,["modelValue"])]),_:1}),t(fe,{label:"Excel导入",name:"excel"},{default:l(()=>[t(Al,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":ml,accept:".xlsx,.xls"},{tip:l(()=>[...e[118]||(e[118]=[s("div",{class:"el-upload__tip"}," 只能上传 xlsx/xls 文件 ",-1)])]),default:l(()=>[t(i,{class:"el-icon--upload"},{default:l(()=>[t(c(Ml))]),_:1}),e[119]||(e[119]=s("div",{class:"el-upload__text"},[n(" 将Excel文件拖到此处，或"),s("em",null,"点击上传")],-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t(W,{modelValue:R.value,"onUpdate:modelValue":e[38]||(e[38]=a=>R.value=a),title:"创建题库",width:"500px"},{footer:l(()=>[t(m,{onClick:e[37]||(e[37]=a=>R.value=!1)},{default:l(()=>[...e[122]||(e[122]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:qt,loading:oe.value},{default:l(()=>[...e[123]||(e[123]=[n("创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ye,{model:re,rules:at,ref_key:"bankFormRef",ref:tt,"label-width":"80px"},{default:l(()=>[t(f,{label:"题库名称",prop:"name"},{default:l(()=>[t(C,{modelValue:re.name,"onUpdate:modelValue":e[35]||(e[35]=a=>re.name=a),placeholder:"请输入题库名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"题库描述",prop:"description"},{default:l(()=>[t(C,{modelValue:re.description,"onUpdate:modelValue":e[36]||(e[36]=a=>re.description=a),type:"textarea",rows:3,placeholder:"请输入题库描述（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(W,{modelValue:_e.value,"onUpdate:modelValue":e[42]||(e[42]=a=>_e.value=a),title:"编辑题库",width:"500px"},{footer:l(()=>[t(m,{onClick:e[41]||(e[41]=a=>_e.value=!1)},{default:l(()=>[...e[124]||(e[124]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:Mt,loading:Qe.value},{default:l(()=>[...e[125]||(e[125]=[n(" 更新 ",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ye,{model:de,rules:at,ref_key:"editBankFormRef",ref:lt,"label-width":"100px"},{default:l(()=>[t(f,{label:"题库名称",prop:"name"},{default:l(()=>[t(C,{modelValue:de.name,"onUpdate:modelValue":e[39]||(e[39]=a=>de.name=a),placeholder:"请输入题库名称",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"题库描述",prop:"description"},{default:l(()=>[t(C,{modelValue:de.description,"onUpdate:modelValue":e[40]||(e[40]=a=>de.description=a),type:"textarea",rows:4,placeholder:"请输入题库描述（可选）",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(W,{modelValue:be.value,"onUpdate:modelValue":e[45]||(e[45]=a=>be.value=a),title:"题库详情",width:"800px"},{footer:l(()=>[t(m,{onClick:e[43]||(e[43]=a=>be.value=!1)},{default:l(()=>[...e[126]||(e[126]=[n("关闭",-1)])]),_:1}),t(m,{type:"primary",onClick:e[44]||(e[44]=a=>rt(ee.value))},{default:l(()=>[...e[127]||(e[127]=[n("编辑题库",-1)])]),_:1})]),default:l(()=>[ee.value?(d(),g("div",Po,[t(Ge,{column:2,border:""},{default:l(()=>[t(O,{label:"题库ID"},{default:l(()=>[n(u(ee.value.id),1)]),_:1}),t(O,{label:"题库名称"},{default:l(()=>[n(u(ee.value.name),1)]),_:1}),t(O,{label:"创建者ID"},{default:l(()=>[n(u(ee.value.creatorId),1)]),_:1}),t(O,{label:"创建时间"},{default:l(()=>[n(u(c(Je)(ee.value.createTime)),1)]),_:1}),t(O,{label:"题库描述",span:2},{default:l(()=>[n(u(ee.value.description||"暂无描述"),1)]),_:1})]),_:1})])):x("",!0)]),_:1},8,["modelValue"]),t(W,{modelValue:me.value,"onUpdate:modelValue":e[63]||(e[63]=a=>me.value=a),title:"添加题目",width:"800px"},{footer:l(()=>[t(m,{onClick:e[62]||(e[62]=a=>me.value=!1)},{default:l(()=>[...e[129]||(e[129]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:tl,loading:He.value},{default:l(()=>[...e[130]||(e[130]=[n("创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(ye,{model:r,rules:Ut(),ref_key:"questionFormRef",ref:Ue,"label-width":"100px"},{default:l(()=>[t(f,{label:"所属试卷",prop:"paperId"},{default:l(()=>[t(P,{modelValue:r.paperId,"onUpdate:modelValue":e[46]||(e[46]=a=>r.paperId=a),placeholder:"请选择试卷",style:{width:"100%"}},{default:l(()=>[(d(!0),g(H,null,j(z.value,a=>(d(),V(k,{key:a.id,label:a.title,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"题目类型",prop:"questionTypeId"},{default:l(()=>[t(P,{modelValue:r.questionTypeId,"onUpdate:modelValue":e[47]||(e[47]=a=>r.questionTypeId=a),placeholder:"请选择题目类型",style:{width:"100%"},onChange:Jt},{default:l(()=>[(d(!0),g(H,null,j(te.value,a=>(d(),V(k,{key:a.id,label:a.typeName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"题目内容",prop:"details.questionText"},{default:l(()=>[t(C,{modelValue:r.details.questionText,"onUpdate:modelValue":e[48]||(e[48]=a=>r.details.questionText=a),type:"textarea",rows:4,placeholder:"请输入题目内容",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"分数",prop:"details.score"},{default:l(()=>[t(Ie,{modelValue:r.details.score,"onUpdate:modelValue":e[49]||(e[49]=a=>r.details.score=a),min:1,max:100,"controls-position":"right"},null,8,["modelValue"]),e[128]||(e[128]=s("span",{style:{"margin-left":"8px"}},"分",-1))]),_:1}),t(f,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(Ie,{modelValue:r.sortOrder,"onUpdate:modelValue":e[50]||(e[50]=a=>r.sortOrder=a),min:1,max:999,"controls-position":"right"},null,8,["modelValue"])]),_:1}),$.value==="SINGLE_CHOICE"||$.value==="MULTIPLE_CHOICE"?(d(),g(H,{key:0},[t(f,{label:"选项A",prop:"details.optionA"},{default:l(()=>[t(C,{modelValue:r.details.optionA,"onUpdate:modelValue":e[51]||(e[51]=a=>r.details.optionA=a),placeholder:"请输入选项A"},null,8,["modelValue"])]),_:1}),t(f,{label:"选项B",prop:"details.optionB"},{default:l(()=>[t(C,{modelValue:r.details.optionB,"onUpdate:modelValue":e[52]||(e[52]=a=>r.details.optionB=a),placeholder:"请输入选项B"},null,8,["modelValue"])]),_:1}),t(f,{label:"选项C",prop:"details.optionC"},{default:l(()=>[t(C,{modelValue:r.details.optionC,"onUpdate:modelValue":e[53]||(e[53]=a=>r.details.optionC=a),placeholder:"请输入选项C"},null,8,["modelValue"])]),_:1}),t(f,{label:"选项D",prop:"details.optionD"},{default:l(()=>[t(C,{modelValue:r.details.optionD,"onUpdate:modelValue":e[54]||(e[54]=a=>r.details.optionD=a),placeholder:"请输入选项D"},null,8,["modelValue"])]),_:1}),t(f,{label:"选项E"},{default:l(()=>[t(C,{modelValue:r.details.optionE,"onUpdate:modelValue":e[55]||(e[55]=a=>r.details.optionE=a),placeholder:"请输入选项E（可选）"},null,8,["modelValue"])]),_:1}),t(f,{label:"选项F"},{default:l(()=>[t(C,{modelValue:r.details.optionF,"onUpdate:modelValue":e[56]||(e[56]=a=>r.details.optionF=a),placeholder:"请输入选项F（可选）"},null,8,["modelValue"])]),_:1}),t(f,{label:"正确答案",prop:"details.correctAnswer"},{default:l(()=>[$.value==="SINGLE_CHOICE"?(d(),V(P,{key:0,modelValue:r.details.correctAnswer,"onUpdate:modelValue":e[57]||(e[57]=a=>r.details.correctAnswer=a),placeholder:"请选择正确答案"},{default:l(()=>[t(k,{label:"A",value:"A"}),t(k,{label:"B",value:"B"}),t(k,{label:"C",value:"C"}),t(k,{label:"D",value:"D"}),r.details.optionE?(d(),V(k,{key:0,label:"E",value:"E"})):x("",!0),r.details.optionF?(d(),V(k,{key:1,label:"F",value:"F"})):x("",!0)]),_:1},8,["modelValue"])):$.value==="MULTIPLE_CHOICE"?(d(),V(P,{key:1,modelValue:r.details.correctAnswerArray,"onUpdate:modelValue":e[58]||(e[58]=a=>r.details.correctAnswerArray=a),multiple:"",placeholder:"请选择正确答案（可多选）",onChange:Zt},{default:l(()=>[t(k,{label:"A",value:"A"}),t(k,{label:"B",value:"B"}),t(k,{label:"C",value:"C"}),t(k,{label:"D",value:"D"}),r.details.optionE?(d(),V(k,{key:0,label:"E",value:"E"})):x("",!0),r.details.optionF?(d(),V(k,{key:1,label:"F",value:"F"})):x("",!0)]),_:1},8,["modelValue"])):x("",!0)]),_:1})],64)):x("",!0),$.value==="ANALYSIS"?(d(),V(f,{key:1,label:"正确答案",prop:"details.correctAnswer"},{default:l(()=>[t(C,{modelValue:r.details.correctAnswer,"onUpdate:modelValue":e[59]||(e[59]=a=>r.details.correctAnswer=a),type:"textarea",rows:3,placeholder:"请输入正确答案"},null,8,["modelValue"])]),_:1})):x("",!0),$.value==="ESSAY"?(d(),V(f,{key:2,label:"参考答案",prop:"details.referenceAnswer"},{default:l(()=>[t(C,{modelValue:r.details.referenceAnswer,"onUpdate:modelValue":e[60]||(e[60]=a=>r.details.referenceAnswer=a),type:"textarea",rows:4,placeholder:"请输入参考答案"},null,8,["modelValue"])]),_:1})):x("",!0),t(f,{label:"解释说明"},{default:l(()=>[t(C,{modelValue:r.details.explanation,"onUpdate:modelValue":e[61]||(e[61]=a=>r.details.explanation=a),type:"textarea",rows:3,placeholder:"请输入解释说明（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(W,{modelValue:we.value,"onUpdate:modelValue":e[67]||(e[67]=a=>we.value=a),title:"批量添加题目",width:"1000px"},{footer:l(()=>[t(m,{onClick:e[66]||(e[66]=a=>we.value=!1)},{default:l(()=>[...e[133]||(e[133]=[n("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:rl,loading:ze.value},{default:l(()=>[...e[134]||(e[134]=[n("批量创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[s("div",Ho,[t(ye,{inline:!0},{default:l(()=>[t(f,{label:"所属试卷"},{default:l(()=>[t(P,{modelValue:M.paperId,"onUpdate:modelValue":e[64]||(e[64]=a=>M.paperId=a),placeholder:"请选择试卷",style:{width:"200px"}},{default:l(()=>[(d(!0),g(H,null,j(z.value,a=>(d(),V(k,{key:a.id,label:a.title,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"题目类型"},{default:l(()=>[t(P,{modelValue:M.questionTypeId,"onUpdate:modelValue":e[65]||(e[65]=a=>M.questionTypeId=a),placeholder:"请选择题目类型",style:{width:"150px"},onChange:sl},{default:l(()=>[(d(!0),g(H,null,j(te.value,a=>(d(),V(k,{key:a.id,label:a.typeName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:l(()=>[t(m,{type:"primary",onClick:nl},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Fe))]),_:1}),e[131]||(e[131]=n(" 添加题目 ",-1))]),_:1})]),_:1})]),_:1})]),s("div",zo,[Y.value.length===0?(d(),V(xe,{key:0,description:"点击上方按钮添加题目"})):(d(),g("div",Mo,[(d(!0),g(H,null,j(Y.value,(a,T)=>(d(),g("div",{key:T,class:"batch-question-item"},[s("div",Ro,[s("span",Yo,"题目 "+u(T+1),1),t(m,{type:"text",onClick:I=>il(T)},{default:l(()=>[t(i,null,{default:l(()=>[t(c(Rl))]),_:1})]),_:1},8,["onClick"])]),t(f,{label:"题目内容",style:{"margin-bottom":"12px"}},{default:l(()=>[t(C,{modelValue:a.details.questionText,"onUpdate:modelValue":I=>a.details.questionText=I,placeholder:"请输入题目内容",type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,{label:"分数",style:{"margin-bottom":"12px"}},{default:l(()=>[t(Ie,{modelValue:a.details.score,"onUpdate:modelValue":I=>a.details.score=I,min:1,max:100,"controls-position":"right",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),e[132]||(e[132]=s("span",{style:{"margin-left":"8px"}},"分",-1))]),_:2},1024),U.value==="SINGLE_CHOICE"||U.value==="MULTIPLE_CHOICE"?(d(),g(H,{key:0},[s("div",jo,[t(f,{label:"选项A"},{default:l(()=>[t(C,{modelValue:a.details.optionA,"onUpdate:modelValue":I=>a.details.optionA=I,placeholder:"请输入选项A"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,{label:"选项B"},{default:l(()=>[t(C,{modelValue:a.details.optionB,"onUpdate:modelValue":I=>a.details.optionB=I,placeholder:"请输入选项B"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,{label:"选项C"},{default:l(()=>[t(C,{modelValue:a.details.optionC,"onUpdate:modelValue":I=>a.details.optionC=I,placeholder:"请输入选项C"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,{label:"选项D"},{default:l(()=>[t(C,{modelValue:a.details.optionD,"onUpdate:modelValue":I=>a.details.optionD=I,placeholder:"请输入选项D"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),t(f,{label:"正确答案"},{default:l(()=>[U.value==="SINGLE_CHOICE"?(d(),V(P,{key:0,modelValue:a.details.correctAnswer,"onUpdate:modelValue":I=>a.details.correctAnswer=I,placeholder:"请选择正确答案"},{default:l(()=>[t(k,{label:"A",value:"A"}),t(k,{label:"B",value:"B"}),t(k,{label:"C",value:"C"}),t(k,{label:"D",value:"D"})]),_:1},8,["modelValue","onUpdate:modelValue"])):U.value==="MULTIPLE_CHOICE"?(d(),V(P,{key:1,modelValue:a.details.correctAnswerArray,"onUpdate:modelValue":I=>a.details.correctAnswerArray=I,multiple:"",placeholder:"请选择正确答案（可多选）",onChange:I=>el(I,a)},{default:l(()=>[t(k,{label:"A",value:"A"}),t(k,{label:"B",value:"B"}),t(k,{label:"C",value:"C"}),t(k,{label:"D",value:"D"})]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])):x("",!0)]),_:2},1024)],64)):x("",!0),U.value==="ANALYSIS"?(d(),V(f,{key:1,label:"正确答案"},{default:l(()=>[t(C,{modelValue:a.details.correctAnswer,"onUpdate:modelValue":I=>a.details.correctAnswer=I,type:"textarea",rows:2,placeholder:"请输入正确答案"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):x("",!0),U.value==="ESSAY"?(d(),V(f,{key:2,label:"参考答案"},{default:l(()=>[t(C,{modelValue:a.details.referenceAnswer,"onUpdate:modelValue":I=>a.details.referenceAnswer=I,type:"textarea",rows:3,placeholder:"请输入参考答案"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):x("",!0),t(f,{label:"解释说明"},{default:l(()=>[t(C,{modelValue:a.details.explanation,"onUpdate:modelValue":I=>a.details.explanation=I,type:"textarea",rows:2,placeholder:"请输入解释说明（可选）"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))]))])]),_:1},8,["modelValue"]),t(W,{modelValue:Ce.value,"onUpdate:modelValue":e[70]||(e[70]=a=>Ce.value=a),title:"题目详情",width:"800px"},{footer:l(()=>[t(m,{onClick:e[68]||(e[68]=a=>Ce.value=!1)},{default:l(()=>[...e[146]||(e[146]=[n("关闭",-1)])]),_:1}),t(m,{type:"primary",onClick:e[69]||(e[69]=a=>pt(b.value))},{default:l(()=>[...e[147]||(e[147]=[n("编辑题目",-1)])]),_:1})]),default:l(()=>[b.value?(d(),g("div",Go,[t(Ge,{column:2,border:""},{default:l(()=>[t(O,{label:"题目ID"},{default:l(()=>[n(u(b.value.id),1)]),_:1}),t(O,{label:"题目类型"},{default:l(()=>[n(u(b.value.questionTypeName),1)]),_:1}),t(O,{label:"所属试卷"},{default:l(()=>[n(u(Xt(b.value.paperId)),1)]),_:1}),t(O,{label:"分数"},{default:l(()=>[n(u(b.value.score)+" 分",1)]),_:1}),t(O,{label:"排序"},{default:l(()=>[n(u(b.value.sortOrder),1)]),_:1}),t(O,{label:"题目内容",span:2},{default:l(()=>[n(u(b.value.questionText),1)]),_:1})]),_:1}),s("div",Jo,[e[145]||(e[145]=s("h4",null,"题目详细信息",-1)),b.value.questionTypeCode==="SINGLE_CHOICE"||b.value.questionTypeCode==="MULTIPLE_CHOICE"?(d(),g("div",Ko,[s("div",Wo,[b.value.details.optionA?(d(),g("div",Xo,[e[135]||(e[135]=s("strong",null,"A:",-1)),n(" "+u(b.value.details.optionA),1)])):x("",!0),b.value.details.optionB?(d(),g("div",Zo,[e[136]||(e[136]=s("strong",null,"B:",-1)),n(" "+u(b.value.details.optionB),1)])):x("",!0),b.value.details.optionC?(d(),g("div",es,[e[137]||(e[137]=s("strong",null,"C:",-1)),n(" "+u(b.value.details.optionC),1)])):x("",!0),b.value.details.optionD?(d(),g("div",ts,[e[138]||(e[138]=s("strong",null,"D:",-1)),n(" "+u(b.value.details.optionD),1)])):x("",!0),b.value.details.optionE?(d(),g("div",ls,[e[139]||(e[139]=s("strong",null,"E:",-1)),n(" "+u(b.value.details.optionE),1)])):x("",!0),b.value.details.optionF?(d(),g("div",as,[e[140]||(e[140]=s("strong",null,"F:",-1)),n(" "+u(b.value.details.optionF),1)])):x("",!0)]),s("div",os,[e[141]||(e[141]=s("strong",null,"正确答案:",-1)),n(" "+u(b.value.details.correctAnswer),1)])])):b.value.questionTypeCode==="ANALYSIS"?(d(),g("div",ss,[s("div",ns,[e[142]||(e[142]=s("strong",null,"正确答案:",-1)),n(" "+u(b.value.details.correctAnswer),1)])])):b.value.questionTypeCode==="ESSAY"?(d(),g("div",is,[s("div",rs,[e[143]||(e[143]=s("strong",null,"参考答案:",-1)),n(" "+u(b.value.details.referenceAnswer),1)])])):x("",!0),b.value.details.explanation?(d(),g("div",ds,[e[144]||(e[144]=s("strong",null,"解释说明:",-1)),n(" "+u(b.value.details.explanation),1)])):x("",!0)])])):x("",!0)]),_:1},8,["modelValue"])])}}},_s=$t(us,[["__scopeId","data-v-bdccf42c"]]);export{_s as default};
