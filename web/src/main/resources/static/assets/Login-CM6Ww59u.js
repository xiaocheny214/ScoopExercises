import{u as k,r as f,a as g,c as A,b as r,d as s,w as l,e as M,f as n,g as S,o as U,h as _,i as h,l as z,j as b,k as C,A as E,E as i}from"./index-BVGhpotA.js";import{C as q}from"./CatIcon-Cpp1lzg_.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"login-page"},R={class:"login-card"},B={class:"login-logo"},T={class:"cat-wrapper"},H={class:"login-option"},K={__name:"Login",setup(P){const v=S(),w=k(),m=f(null),u=f(!1),o=g({account:"",password:"",rememberMe:!1}),x=g({account:[{required:!0,message:"请输入你的账号",trigger:"blur"},{min:3,max:20,message:"账号长度在3~20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入你的密码",trigger:"blur"},{min:8,message:"密码长度至少8个字符",trigger:"blur"}]}),d=async()=>{if(await m.value.validate()){u.value=!0;try{const e={account:o.account,password:o.password,rememberMe:o.rememberMe},t=await C.post(E.AUTH.LOGIN,e);t.success===!0?(i.success(t.message||"登录成功，欢迎使用ScoopExercises！"),w.setUserInfo(t.data),o.rememberMe?sessionStorage.setItem("rememberedAccount",o.account):sessionStorage.removeItem("rememberedAccount"),v.push("/home")):i.error(t.message||"登录失败")}catch(e){e.success===!1?i.error(e.message||"登录失败"):(console.error("登录错误:",e),i.error("无法连接到后端服务，请检查后端是否启动"))}finally{u.value=!1}}};return(()=>{const c=sessionStorage.getItem("rememberedAccount");c&&(o.account=c,o.rememberMe=!0)})(),(c,e)=>{const t=n("el-input"),p=n("el-form-item"),V=n("el-checkbox"),I=n("el-button"),y=n("el-form");return U(),A("div",N,[r("div",R,[r("div",B,[r("div",T,[s(q,{"cat-size":"64px",class:"cat-icon"})]),e[3]||(e[3]=r("div",{class:"software-name-box"},[r("div",{class:"software-fullname"},"ScoopExercises"),r("div",{class:"software-subname"},"本地题库刷题小工具")],-1))]),s(y,{ref_key:"loginRef",ref:m,model:o,rules:x,"label-width":"0",class:"login-form",onKeyup:M(d,["enter"])},{default:l(()=>[s(p,{prop:"account"},{default:l(()=>[s(t,{modelValue:o.account,"onUpdate:modelValue":e[0]||(e[0]=a=>o.account=a),placeholder:"请输入账号","prefix-icon":_(h),size:"large",class:"login-input",autocomplete:"on"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"password"},{default:l(()=>[s(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",placeholder:"请输入密码","prefix-icon":_(z),size:"large",class:"login-input",autocomplete:"on"},null,8,["modelValue","prefix-icon"])]),_:1}),r("div",H,[s(V,{modelValue:o.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=a=>o.rememberMe=a),size:"small"},{default:l(()=>[...e[4]||(e[4]=[b("记住账号密码",-1)])]),_:1},8,["modelValue"])]),s(I,{type:"primary",size:"large",class:"login-btn",loading:u.value,onClick:d},{default:l(()=>[...e[5]||(e[5]=[b(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])])])}}},O=L(K,[["__scopeId","data-v-38c5a782"]]);export{O as default};
